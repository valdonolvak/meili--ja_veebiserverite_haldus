Turvalisuse ja haldamise seisukohalt on alati hea mõte luua administraatoritoimingute jaoks eraldi süsteemikasutaja, selle asemel et kasutada otse `root` kontot.

Siin on samm-sammuline juhend süsteemikasutaja **haldur** loomiseks, tema lisamiseks `sudo` gruppi ning parooli küsimise keelamiseks `sudo` käskude puhul.

-----

## 1\. Sudo Paigaldamine Debiani Süsteemi

Debianis ei pruugi `sudo` pakett vaikimisi paigaldatud olla. Kui sa ei saa kasutada `sudo` käsku, pead selle esmalt paigaldama ja seadistama.

### Samm 1.1: Sisse logimine Root Kasutajana

Logi sisse `root` kasutajana (või kasuta `su -` käsku, kui oled juba mõne teise kasutajaga sisse loginud):

```bash
su -
# Sisesta root parool
```

### Samm 1.2: Sudo Paketi Paigaldamine

Uuenda pakettide loend ja paigalda `sudo`:

```bash
apt update
apt install sudo -y
```

  * **Kommentaar:** Nüüd on `sudo` pakett süsteemi paigaldatud. Järgmine samm on lisada kasutajad `sudo` gruppi.

-----

## 2\. Süsteemikasutaja "haldur" Loomine

Loome uue süsteemikasutaja nimega **haldur** ja määrame talle parooli.

### Samm 2.1: Kasutaja Loomine

Kasuta käsku `adduser` (see loob ka kasutaja kodukataloogi):

```bash
adduser haldur
```

  * **Kommentaar:** Süsteem küsib sinult parooli ja mitmeid lisainformatsiooni (nimi, telefon jne). Sisesta kindlasti **tugev parool** ja jäta teised väljad tühjaks, kui need pole olulised.

### Samm 2.2: Kasutaja "haldur" Lisamine Sudo Gruppi

Selleks, et **haldur** saaks käivitada administraatoritaseme käske (st kasutada `sudo`), peame ta lisama `sudo` gruppi. Debiani süsteemides on see tavaliselt grupp nimega **`sudo`**.

Kasutades root õigusi:

```bash
usermod -aG sudo haldur
```

  * **Kommentaar:**
      * **`usermod`** on käsk kasutajakonto muutmisteks.
      * **`-a`** (append) tähendab lisamist.
      * **`-G sudo`** määrab grupi, kuhu kasutaja lisatakse (antud juhul `sudo` grupp).
      * Selles grupis olevad kasutajad saavad käivitada käske `sudo` abil.

### Samm 2.3: Kontrollimine

Võid kontrollida, kas **haldur** kuulub nüüd `sudo` gruppi:

```bash
groups haldur
```

Väljund peaks näitama vähemalt gruppe `haldur` ja `sudo`.

-----

## 3\. Parooli Küsimise Keelamine Haldur Kasutajale (RISK\!)

Vaikimisi küsib `sudo` iga kord kasutaja parooli. Kui soovid, et **haldur** saaks käivitada `sudo` käske ilma parooli sisestamata, pead muutma `sudo` konfiguratsiooni. **See tegevus vähendab oluliselt turvalisust ja seda ei soovitata tootmiskeskkondades\!**

### Samm 3.1: Konfiguratsioonifaili Avamine

Kasuta käsku `visudo`, et avada `/etc/sudoers` fail turvalisel viisil:

```bash
visudo
```

  * **Kommentaar:** **`visudo`** on soovitatav viis `sudoers` faili redigeerimiseks, kuna see kontrollib süntaksit enne faili salvestamist. Süntaksiviga selles failis võib su süsteemi lukustada.

### Samm 3.2: Parooli Küsimise Keelamine

Leia failist järgmine rida (või lisa see faili lõppu):

```
# User privilege specification
root    ALL=(ALL:ALL) ALL
```

Lisa sellele reale järgmine rida spetsiaalselt **haldur** kasutaja jaoks:

```
haldur ALL=(ALL) NOPASSWD: ALL
```

Terve osa peaks nägema välja selline:

```
# User privilege specification
root    ALL=(ALL:ALL) ALL
haldur  ALL=(ALL) NOPASSWD: ALL 
```

  * **Kommentaar:**
      * **`haldur`**: See on kasutajanimi.
      * **`ALL=(ALL)`**: See tähendab, et kasutaja tohib käivitada käske mis tahes terminalist (esimene ALL) mis tahes kasutajana (teine ALL).
      * **`NOPASSWD: ALL`**: See on võti, mis keelab parooli küsimise *kõigi* käskude puhul.

### Samm 3.3: Salvestamine ja Väljumine

Salvesta muudatused ja välju:

  * Kui kasutasid vaikimisi **vi/vim** redaktorit (millega `visudo` avaneb), vajuta klahve: **`Esc`**, **`:wq`** (write and quit), **`Enter`**.
  * Kui sul on määratud teine redaktor (nt nano), kasuta selle salvestamiskäsku.

### Samm 3.4: Testimine

Logi välja root kontolt ja logi sisse kasutajana **haldur** (või kasuta `su - haldur`). Proovi nüüd käivitada `sudo` käsk ilma paroolita:

```bash
sudo apt update
```

Kui seadistus on edukas, käivitatakse käsk ilma parooli küsimiseta.
